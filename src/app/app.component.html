<div class="auction-app">
  <!-- Header with gradient background and reset button -->
  <div class="app-header">
    <div class="header-content">
      <h1 class="app-title">CWF Auction</h1>
      <div class="header-actions">
        <!-- Save Button -->
        <button class="btn-header-action" 
                title="Save Auction Data"
                (click)="saveAuctionData()">
          <i class="pi pi-save"></i>
          Save
        </button>
        
        <!-- Reset Button -->
        <button class="btn-header-action btn-reset" 
                title="Reset Entire Auction"
                (click)="resetAuction()">
          <i class="pi pi-refresh"></i>
          Reset Auction
        </button>
      </div>
    </div>
  </div>

  <div class="main-container">
    <div class="content-grid">
      <!-- Left Panel - Available Players with Enhanced Stats -->
      <div class="panel available-players-panel">
        <div class="panel-header">
          <h2 class="panel-title">Available Players ({{availablePlayers.length}})</h2>
        </div>
        
        <!-- Scrollable area -->
        <div class="players-list">
          <div *ngFor="let player of availablePlayers" class="player-card">
            <!-- Main player info row -->
            <div class="player-main-row">
              <div class="player-info">
                <div class="player-name">{{player.name}}</div>
                <!-- <div class="player-role" [ngClass]="getRoleClass(player.role)">
                  {{player.role}}
                </div> -->
              </div>
              
              <!-- <div class="player-price-section">
                <div class="player-price">‚Çπ{{player.basePrice}}</div>
                <div class="mvp-badge" *ngIf="player.mvpRanking">
                  MVP #{{player.mvpRanking}}
                </div>
              </div> -->
            </div>
            
            <!-- Player Stats Grid -->
           
            
            <!-- Action Button -->
           <!-- <div class="player-actions">
           <button class="btn-auction" 
            (click)="selectPlayerForAuction(player)"
            [disabled]="auctionInProgress"
            title="Start auction for {{player.name}}">
            <i class="pi pi-gavel"></i>
            Start Auction
            </button>
          </div> -->
          </div>
          
          <div *ngIf="availablePlayers.length === 0" class="empty-state">
            <i class="pi pi-users empty-icon"></i>
            <p>No players available</p>
          </div>
        </div>
      </div>
      
      <!-- Center Panel - Current Auction with Enhanced Player Display -->
      <div class="panel current-auction-panel">
        <div *ngIf="currentPlayer && auctionInProgress" class="auction-active">
          <div class="player-spotlight">
            <!-- <div class="player-avatar">{{currentPlayer.name.charAt(0)}}</div> -->
            <h2 class="spotlight-player-name">{{currentPlayer.name}}</h2>
            <!-- <div class="player-role-tag" [ngClass]="getRoleClass(currentPlayer.role)">
              {{currentPlayer.role}}
            </div> -->
            
            <!-- Enhanced MVP Badge -->
            <div class="mvp-spotlight" *ngIf="currentPlayer.mvpRanking">
              <i class="pi pi-star-fill mvp-icon"></i>
              <span>MVP Rank #{{currentPlayer.mvpRanking}}</span>
            </div>
          </div>
          
          <!-- Player Stats in Spotlight -->
          <div class="spotlight-stats">
            <div class="stats-grid">
              <div class="spotlight-stat batting">
                <div class="stat-icon">üèè</div>
                <div class="stat-info">
                  <div class="stat-number">{{currentPlayer.battingStats.runs | number}}</div>
                  <div class="stat-text">Runs</div>
                </div>
              </div>
              
              <div class="spotlight-stat batting">
                <div class="stat-icon">‚ö°</div>
                <div class="stat-info">
                  <div class="stat-number">{{currentPlayer.battingStats.strikeRate | number:'1.1-1'}}</div>
                  <div class="stat-text">Strike Rate</div>
                </div>
              </div>
              
              <div class="spotlight-stat bowling" *ngIf="currentPlayer.bowlingStats">
                <div class="stat-icon">üéØ</div>
                <div class="stat-info">
                  <div class="stat-number">{{currentPlayer.bowlingStats.wickets}}</div>
                  <div class="stat-text">Wickets</div>
                </div>
              </div>
              
              <div class="spotlight-stat bowling" *ngIf="currentPlayer.bowlingStats">
                <div class="stat-icon">üìä</div>
                <div class="stat-info">
                  <div class="stat-number">{{currentPlayer.bowlingStats.economy | number:'1.1-2'}}</div>
                  <div class="stat-text">Economy</div>
                </div>
              </div>
            </div>
          </div>
          
          <div class="bid-display">
            <div class="bid-label">Current Bid</div>
            <div class="bid-amount">‚Çπ{{currentBid}}</div>
            <div *ngIf="currentTeam" class="bid-team">
              by <span class="team-name" [style.color]="currentTeam.color">{{currentTeam.shortName}}</span>
            </div>
          </div>
          
          <div class="auction-actions">
            <button class="btn-auction-action sold" [disabled]="!currentTeam" (click)="sellPlayer()">
              SOLD!
            </button>
            <button class="btn-auction-action unsold" 
             [disabled]="currentTeam !== null && currentBid > currentPlayer.basePrice"
             (click)="markUnsold()">
              UNSOLD
            </button>
          </div>
        </div>
        
        <div *ngIf="!currentPlayer || !auctionInProgress" class="auction-inactive">
          <div *ngIf="availablePlayers.length > 0" class="start-auction">
            <i class="pi pi-gavel auction-icon"></i>
            <p>Ready to start the next auction</p>
            <button class="btn-start-auction" (click)="startAuction()">
              START NEXT AUCTION
            </button>
          </div>
          
          <div *ngIf="availablePlayers.length === 0 && unsoldPlayers.length > 0" class="start-round">
            <i class="pi pi-refresh auction-icon"></i>
            <p>All players have been through auction once</p>
            <button class="btn-start-round" (click)="startNextRound()">
              START NEXT ROUND
            </button>
          </div>
          
          <div *ngIf="availablePlayers.length === 0 && unsoldPlayers.length === 0" class="auction-complete">
            <i class="pi pi-check-circle auction-icon"></i>
            <h3>Auction Complete!</h3>
            <p>All players have been auctioned</p>
          </div>
        </div>
      </div>
      
      <!-- Right Panel - Unsold Players with Stats -->
      <div class="panel unsold-players-panel">
        <div class="panel-header">
          <h2 class="panel-title">Unsold Players ({{unsoldPlayers.length}})</h2>
        </div>
        
        <!-- Scrollable area -->
        <div class="players-list">
          <div *ngFor="let player of unsoldPlayers" class="player-card">
            <!-- Main player info row -->
            <div class="player-main-row">
              <div class="player-info">
                <div class="player-name">{{player.name}}</div>
              </div>
              
              <!-- <div class="player-price-section">
                <div class="player-price">‚Çπ{{player.basePrice}}</div>
              </div> -->
            </div>
            
            <!-- Compact Stats for Unsold Players -->
        
          </div>
          
          <div *ngIf="unsoldPlayers.length === 0" class="empty-state">
            <i class="pi pi-info-circle empty-icon"></i>
            <p>No unsold players</p>
          </div>
        </div>

        <!-- Auction Stats -->
        <div class="auction-stats">
          <h3 class="stats-title">Auction Stats</h3>
          
          <div class="stat-overview">
            <div class="stat-total">
              <span class="stat-label">Total Players</span>
              <span class="stat-value">{{totalPlayers}}</span>
            </div>
            
            <div class="progress-bar">
              <div class="progress-segment sold" [style.width.%]="soldPercentage" [attr.title]="'Sold: ' + soldPercentage + '%'"></div>
              <div class="progress-segment unsold" [style.width.%]="unsoldPercentage" [attr.title]="'Unsold: ' + unsoldPercentage + '%'"></div>
              <div class="progress-segment pending" [style.width.%]="pendingPercentage" [attr.title]="'Pending: ' + pendingPercentage + '%'"></div>
            </div>
          </div>
          
          <div class="stat-cards">
            <div class="stat-card sold">
              <div class="stat-number">{{soldPlayers.length}}</div>
              <div class="stat-name">Sold</div>
              <div class="stat-percent">{{soldPercentage}}%</div>
            </div>
            
            <div class="stat-card unsold">
              <div class="stat-number">{{unsoldPlayers.length}}</div>
              <div class="stat-name">Unsold</div>
              <div class="stat-percent">{{unsoldPercentage}}%</div>
            </div>
            
            <div class="stat-card pending">
              <div class="stat-number">{{availablePlayers.length}}</div>
              <div class="stat-name">Pending</div>
              <div class="stat-percent">{{pendingPercentage}}%</div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Teams Section with Enhanced Player Stats -->
    <div class="teams-section">
      <h2 class="section-title">Teams</h2>
      
      <div class="teams-grid">
        <div *ngFor="let team of teams" class="team-card" [style.border-color]="team.color">
          <div class="team-header" [style.background-color]="team.color + '15'">
            <div class="team-name">{{team.shortName}}</div>
            <div class="team-budget">‚Çπ{{team.budget}}</div>
          </div>
          
          <div class="team-players">
            <div *ngFor="let player of team.players" class="team-player enhanced">
              <div class="team-player-main">
                <span class="player-name">{{player.name}}</span> 
                <span class="player-price">‚Çπ{{player.soldPrice}}</span>
              </div>
              
              <!-- Compact team player stats -->
              <!-- <div class="team-player-stats">
                <div class="mini-stat">
                  <span class="mini-label">MVP</span>
                  <span class="mini-value">#{{player.mvpRanking}}</span>
                </div>
                <div class="mini-stat">
                  <span class="mini-label">Runs</span>
                  <span class="mini-value">{{formatNumber(player.battingStats.runs)}}</span>
                </div>
                <div class="mini-stat" *ngIf="player.bowlingStats">
                  <span class="mini-label">Wkts</span>
                  <span class="mini-value">{{player.bowlingStats.wickets}}</span>
                </div>
              </div> -->
            </div>
            
            <div *ngIf="team.players.length === 0" class="team-empty">
              No players
            </div>
          </div>
          
          <div *ngIf="auctionInProgress" class="team-action">
           <button class="btn-bid" 
            [disabled]="!canTeamAffordNextBid(team)"
             [style.background-color]="team.color"
            (click)="placeBid(team.id)">
              Bid ‚Çπ{{getNextBidAmount()}}
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<p-confirmDialog></p-confirmDialog>

<!-- Toast Messages -->
<p-toast></p-toast>